(this.webpackJsonpcapstone=this.webpackJsonpcapstone||[]).push([[0],{112:function(e,t,a){},181:function(e,t,a){e.exports=a(328)},327:function(e,t,a){},328:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),o=a.n(i),s=a(95),l=a.n(s),c=a(54),u=a(149),m=a(20),g=a(21),d=a(22),h=a(49),p=a(150),v=a.n(p),f={bronx:"Bronx",brooklyn:"Brooklyn",manhattan:"Manhattan",queens:"Queens",staten_island:"Staten Island",child_care_parent_information:"Child Care",counseling_support_groups:"Mental Health Care",health:"Health Care",housing:"Housing",homelessness:"Homelessness",faith_based_organization:"Faith Baised Organizations",youth_services:"Youth Services",lesbian_gay_bisexual_and_or_transgender:"LGBTQ Services",legal_services:"Legal Services",immigration:"Immigration Services",domestic_violence:"DV Support",aging:"Aging Resources",disabilities:"Disability Resources",arts_culture:"Arts and Culture",education:"Education",employment_job_training:"Employment and Job Training",veterans_military_families:"Veteran Services",community_service_volunteerism:"Volunteer Opportunities",personal_finance_financial_education:"Financial Education"},b=["aging","arts_culture","child_care_parent_information","disabilities","education","employment_job_training","faith_based_organization","health","housing","homelessness","lesbian_gay_bisexual_and_or_transgender","legal_services","immigration","counseling_support_groups","veterans_military_families","community_service_volunteerism","youth_services"],_=["queens","brooklyn","staten_island","bronx","manhattan"],y=[{key:1,text:"Child Care",value:"child_care_parent_information"},{key:13,text:"Counseling",value:"counseling_support_groups"},{key:14,text:"Education",value:"education"},{key:6,text:"Employment and Job Training",value:"employment_job_training"},{key:9,text:"Financial Education",value:"personal_finance_financial_education"},{key:3,text:"Health Care",value:"health"},{key:4,text:"Housing",value:"housing"},{key:15,text:"Legal Services",value:"legal_services"},{key:11,text:"LGBTQ Resources",value:"lesbian_gay_bisexual_and_or_transgender"},{key:17,text:"Immigration",value:"immigration"},{key:20,text:"Support Groups",value:"counseling_support_groups"},{key:12,text:"Veteran Services",value:"veterans_military_families"},{key:10,text:"Victim Services",value:"victim_services"},{key:5,text:"Youth Services",value:"youth_services"}],E=[{key:1,text:"Bronx",value:"bronx"},{key:2,text:"Brooklyn",value:"brooklyn"},{key:3,text:"Manhattan",value:"manhattan"},{key:4,text:"Queens",value:"queens"},{key:5,text:"Staten Island",value:"staten_island"}],x=a(334),S=a(335),k=a(333),C=(a(112),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).renderLabel=function(e){return{color:"blue",content:e.text,icon:"check"}},n.handleCategoryChange=function(e,t){t.value.length<=3&&n.setState({categories:t.value},n.handleErrorMessage)},n.handleLocationsChange=function(e,t){t.value.length<=1&&n.setState({locations:t.value},n.handleErrorMessage)},n.handleErrorMessage=function(){var e=n.state,t=e.locations,a=e.categories;t.length>=1&&a.length>=1&&n.setState({errorMessage:!1})},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.categories,r=t.locations;a.length>0&&r.length>0?(n.props.onSubmitCallback(n.state.categories,n.state.locations),n.setState({errorMessage:!1})):n.setState({errorMessage:!0})},n.state={locations:[],categories:[],errorMessage:!1},n}return Object(g.a)(a,[{key:"render",value:function(){return r.a.createElement(x.a,{className:"DropdownSearch"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"ui two column centered row"},r.a.createElement("div",{className:"column dropdownInputSingle"},r.a.createElement(S.a,{as:"h3",content:"I am looking for: ",subheader:"(Select 1-3 categories)"}),r.a.createElement(k.a,{placeholder:"Search...",fluid:!0,multiple:!0,search:!0,selection:!0,required:!0,minwidth:250,value:this.state.categories,renderLabel:this.renderLabel,onChange:this.handleCategoryChange,options:y})),r.a.createElement("br",null),r.a.createElement("div",{className:"column dropdownInputSingle"},r.a.createElement(S.a,{as:"h3",content:"Located in: ",subheader:"(Select one)"}),r.a.createElement(k.a,{placeholder:"Location",fluid:!0,multiple:!0,search:!0,selection:!0,required:!0,minwidth:250,value:this.state.locations,renderLabel:this.renderLabel,onChange:this.handleLocationsChange,options:E}))),r.a.createElement("br",null),r.a.createElement("div",{className:"ui row"},this.state.errorMessage?r.a.createElement("div",{className:"ui message green center-text bold-text"},"Please select a location and a category"):null,r.a.createElement("button",{type:"submit",className:"button ui fluid basic blue"},"Search"))))}}]),a}(r.a.Component)),N=a(167),w=a.n(N);a(327),n.Component;var z=function(e){var t,a=e.categories,n=e.locations,i=e.results,o=a.map((function(e){return f[e]}));if(a.length>0&&n.length>0&&i.length>0){if(3===a.length){var s=a[0],l=a[1],c=a[2],u=function(e){var t=new RegExp(s,"gi"),a=new RegExp(l,"gi"),n=new RegExp(c,"gi");return e.filter((function(e){return t.test(e.organizationname)||t.test(e.description)||"Y"===e[s]})).filter((function(e){return a.test(e.organizationname)||a.test(e.description)||"Y"===e[l]})).filter((function(e){return n.test(e.organizationname)||n.test(e.description)||"Y"===e[c]}))}(i).filter((function(e){return"Y"===e[n[0]]})).sort((function(e,t){return e.organizationname.localeCompare(t.organizationname)}));t=u}if(2===a.length){var m=a[0],g=a[1],d=function(e){var t=new RegExp(m,"gi"),a=new RegExp(g,"gi");return e.filter((function(e){return t.test(e.organizationname)||t.test(e.description)||"Y"===e[m]})).filter((function(e){return a.test(e.organizationname)||a.test(e.description)||"Y"===e[g]}))}(i).filter((function(e){return"Y"===e[n[0]]})).sort((function(e,t){return e.organizationname.localeCompare(t.organizationname)}));t=d}if(1===a.length){var h=a[0],p=function(e){var t=new RegExp(h,"gi");return e.filter((function(e){return t.test(e.organizationname)||t.test(e.description)||"Y"===e[h]}))}(i).filter((function(e){return"Y"===e[n[0]]})).sort((function(e,t){return e.organizationname.localeCompare(t.organizationname)}));t=p}return 0===t.length?r.a.createElement(x.a,null,"Your search returned no results.",r.a.createElement("br",null),"Please try again."):r.a.createElement("div",{className:"ResultList"},r.a.createElement(x.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"ui message"},r.a.createElement("h3",{className:"bold-text"},t.length," results for ",o.map((function(e){return e===o[o.length-1]?" ".concat(e," "):"".concat(e,", ")}))," in ",f[n[0]],":")),t.map((function(e){return r.a.createElement("details",{key:e.organizationname,open:"open"},r.a.createElement("summary",null,r.a.createElement("span",{className:"Summary"},e.organizationname)),r.a.createElement("div",{className:"ResultListDetails"},e.locations&&e.locations.length>0?r.a.createElement("div",{className:"locations"},r.a.createElement("span",{className:"bold-text"},"Locations:  "),e.locations.map((function(e){return r.a.createElement("span",{key:e.location},r.a.createElement("i",{className:"fa fa-map-marker"})," ",f[e]," ")}))):null,r.a.createElement("div",{className:"ResultListDescription"},r.a.createElement(w.a,{text:e.description,min:50,ideal:100,max:125,readMoreText:"(Read more)"})),e.phone&&10===e.phone.length?r.a.createElement("div",{className:"phone"},r.a.createElement("span",{className:"bold-text"},"Phone:")," ",e.phone.replace(/\D+/g,"").replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")):null,e.url?r.a.createElement("div",{className:"url"},r.a.createElement("span",{className:"bold-text"},"Website:")," ",e.url):null,e.address1?r.a.createElement("div",{className:"address"},r.a.createElement("span",{className:"bold-text"},"Address:")," ",e.address1):null,e===t[t.length-1]?null:r.a.createElement("hr",null)))})))))}return null},L=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(u.a)(l.a.mark((function e(){var t,a,r,i,o,s,u,m,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:"https://data.cityofnewyork.us/resource/pqg4-dm6b.json"});case 2:for(t=e.sent,a=t.data,r=_,i=0;i<a.length;i++)for(o=0;o<r.length;o++)"Y"===a[i][r[o]]&&(a[i].locations||(a[i].locations=[]),a[i].locations.push(r[o]));for(s=b,u=0;u<a.length;u++)for(m=0;m<s.length;m++)"Y"===a[u][s[m]]&&(a[u].keywords||(a[u].keywords=[]),a[u].keywords.push(s[m]));g=a.filter((function(e){return e.description})).filter((function(e){return void 0!==e.phone||void 0!==e.url})).filter((function(e){return"The Salvation Army"!==e.organizationname})).map((function(e){return"ACCESS NYC"===e.organizationname?Object(c.a)(Object(c.a)({},e),{},{url:"https://access.nyc.gov/"}):e})).map((function(e){return"The ARab American Family Support Center"===e.organizationname?Object(c.a)(Object(c.a)({},e),{},{organizationname:"The Arab American Family Support Center"}):e})),n.setState({results:g}),console.log(n.state.results);case 11:case"end":return e.stop()}}),e)}))),n.handleDropdownSubmit=function(e,t){console.log(e,t),n.setState({searchCategories:e,searchLocations:t})},n.handleKeywordSubmit=function(e){console.log(e),n.setState({searchTerm:e})},n.state={results:[],searchCategories:[],searchLocations:[]},n}return Object(g.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App ui container"},r.a.createElement("div",{className:"SiteTitle"},r.a.createElement("h1",{className:"ui header"},"NYC Social Service Search",r.a.createElement("span",{className:"light-grey-text"},"*"),r.a.createElement("div",{className:"sub header"},"Find housing, education, health care, and more!"))),r.a.createElement(C,{onSubmitCallback:this.handleDropdownSubmit}),r.a.createElement(z,{results:this.state.results,categories:this.state.searchCategories,locations:this.state.searchLocations})))}}]),a}(r.a.Component);o.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.8aef9b73.chunk.js.map